pipeline {
    agent {
        label 'alma-ansible'
    }
    stages {
        stage('Checkout and Pull') {
            steps {
                dir('$WORKSPACE/ansible-playbooks') {
                    git branch: 'main', url: 'https://github.com/DivakarK22/ansible-playbooks.git'
                }
            }
        }
        stage('Updating Inventory file') {
            steps {
                sh 'rm -rf /etc/ansible/hosts || true'
                    // Define multi-line text
                sh 'cat <<EOF > example.txt
                    192.168.1.10
                EOF'
                sh "cat /etc/ansible/hosts"
            }
        }
        stage('Tasks') {
            steps {
                sh 'ansible-playbook $WORKSPACE/jenkins-playbooks/test.yml  || true'
            }
        }          
    }
}